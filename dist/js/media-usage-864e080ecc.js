!function(){function e(n,t,a){function i(c,r){if(!t[c]){if(!n[c]){var o="function"==typeof require&&require;if(!r&&o)return o(c,!0);if(s)return s(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){var t=n[c][1][e];return i(t||e)},l,l.exports,e,n,t,a)}return t[c].exports}for(var s="function"==typeof require&&require,c=0;c<a.length;c++)i(a[c]);return i}return e}()({1:[function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),s=jQuery.noConflict();n.exports=function(){function e(){a(this,e),"undefined"!=typeof bulkScanAjaxObject&&this.init()}return i(e,[{key:"init",value:function(){this.queue=bulkScanAjaxObject.attachments,this.attachments=bulkScanAjaxObject.attachments.length,this.scanChunkSize=bulkScanAjaxObject.limit,this.isScanning=!1,this.jsRunScanClickEvent(),this.jsStopScanClickEvent()}},{key:"jsRunScanClickEvent",value:function(){s(document).on("click",".js-run-scan",function(e){e.preventDefault(),s(e.target).hide(),s(".js-scan-spinner").addClass("is-active"),s(".js-stop-scan").show(),this.isScanning=!0,this.runMediaScanner()}.bind(this))}},{key:"jsStopScanClickEvent",value:function(){s(document).on("click",".js-stop-scan",function(e){e.preventDefault(),this.isScanning=!1,s(e.target).hide(),s(".js-scan-spinner").removeClass("is-active"),s(".js-run-scan").show()}.bind(this))}},{key:"runMediaScanner",value:function(){if(0===this.queue.length||this.isScanning===!1){var e=s(".js-scan-spinner");return void(e.hasClass("is-active")&&(e.removeClass("is-active"),s(".js-stop-scan").hide(),s(".js-run-scan").show()))}var n=this.queue.splice(0,this.scanChunkSize);s.ajax({url:bulkScanAjaxObject.ajaxUrl,type:"post",data:{action:"scanUsageAjaxMethod",nonce:bulkScanAjaxObject.nonce,attachments:n,queue:this.queue.length},success:function(e,n){this.updateProgress(),this.runMediaScanner()}.bind(this),error:function(e,n,t){}})}},{key:"updateProgress",value:function(){s(".js-scanned").length>0&&s(".js-scanned").text(this.attachments-this.queue.length),s(".js-progress").length>0&&s(".js-progress").text()!=this.getScanProgressInPrecentage()&&s(".js-progress").text(this.getScanProgressInPrecentage())}},{key:"getScanProgressInPrecentage",value:function(){return Math.round((this.attachments-this.queue.length)/this.attachments*100)}}]),e}()},{}],2:[function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),s=jQuery.noConflict();n.exports=function(){function e(){a(this,e),"undefined"!=typeof singleScanAjaxObject&&this.jsRefreshUsage()}return i(e,[{key:"jsRefreshUsage",value:function(){s(document).on("click",".js-refresh-usage",function(e){e.preventDefault(),s("#attachment_usage").addClass("is-disabled"),this.runMediaScanner()}.bind(this))}},{key:"runMediaScanner",value:function(){s.ajax({url:singleScanAjaxObject.ajaxUrl,type:"post",data:{action:"scanUsageAjaxMethod",nonce:singleScanAjaxObject.nonce,attachments:[singleScanAjaxObject.attachment]},success:function(e,n){this.reRenderUsage()}.bind(this)})}},{key:"reRenderUsage",value:function(){s.ajax({url:singleScanAjaxObject.ajaxUrl,type:"post",data:{action:"outputUsageListAjaxMethod",nonce:singleScanAjaxObject.nonce,attachment:singleScanAjaxObject.attachment},success:function(e,n){s("#attachment_usage").removeClass("is-disabled"),s(".js-media-usage-wrapper").html(e)}.bind(this)})}}]),e}()},{}],3:[function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),s=jQuery.noConflict(),c=e("./BulkScan.js"),r=e("./SingleScan.js"),o=function(){function e(){a(this,e),"undefined"!=typeof getPostType&&this.jsRefreshUsage(),this.warning(),this.deleteLink(),new c,new r}return i(e,[{key:"deleteLink",value:function(){s(window).load(function(){var e=!1;s(document).on("click",".attachment-preview",function(n){var t=s(".media-modal-content").find(".setting .name").next("span").find("a").prop("href"),a=s(".media-modal-content").find(".setting .name").next("span").find("a").text(),i=s(".media-modal-content .attachment-details").attr("data-id"),c="post.php?action=delete&post="+i+"&_wpnonce="+hbgmedia.rmNonce;a&&(s(".media-modal-content .actions .delete-attachment").remove(),s(".media-modal-content .actions").append('<a data-url="'+t+'"  onclick="return false;" href="'+c+'" class="checkDependencies">'+hbgmedia.deleteBtn+"</a>")),e=!0}),e||s(".row-actions").each(function(){var e=s(this).closest("tr").find(".parent.column-parent a").prop("href"),n=s(this).closest("tr").find(".parent.column-parent a").find("strong");if(n){var t=s(this).find(".delete a").attr("href");s(this).find(".delete").addClass("hidden"),s(this).find(".edit").after('<span class="content-attached"><a data-url="'+e+'"  onclick="return false;" class="checkDependencies aria-button-if-js" href="'+t+'">'+hbgmedia.deleteBtn+"</a></span>  | ")}})})}},{key:"warning",value:function(){s(document).on("click",".checkDependencies",function(e){var n=new RegExp("[?&]post=([^&#]*)","i"),t=n.exec(s(this).attr("data-url"));if(t){var a={action:"getMediaPostTitle",nonce:hbgmedia.nonce,id:t[1]};jQuery.post(hbgmedia.url,a,function(e){if(e)var n=confirm(hbgmedia.response+": "+e);if(n){var a={action:"deleteAttachment",nonce:hbgmedia.nonce,id:t[1],post_type:"attachment"};jQuery.post(hbgmedia.url,a,function(e){location.href="upload.php"})}})}})}}]),e}();new o},{"./BulkScan.js":1,"./SingleScan.js":2}]},{},[3]);